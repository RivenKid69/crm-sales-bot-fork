# =============================================================================
# SOLUTION SELLING STATES
# =============================================================================
# FIX: Переработано для использования universal intents
# =============================================================================

states:
  solution_pain:
    extends: _base_phase
    mixins:
      - unified_progress
      - solution_rules
    goal: "Глубоко понять боль клиента"
    parameters:
      next_phase_state: solution_map
      default_price_action: deflect_and_continue
      default_unclear_action: continue_current_goal
    rules:
      no_problem: create_pain_awareness
      unclear: clarify_pain
    transitions:
      data_complete: solution_map

  solution_map:
    extends: _base_phase
    mixins:
      - unified_progress
      - solution_rules
    goal: "Связать боль с нашим решением"
    parameters:
      next_phase_state: solution_value
      default_price_action: deflect_and_continue
      default_unclear_action: continue_current_goal
    rules:
      unclear: clarify_solution
    transitions:
      data_complete: solution_value

  solution_value:
    extends: _base_phase
    mixins:
      - unified_progress
      - solution_rules
    goal: "Доказать ценность решения"
    parameters:
      next_phase_state: presentation
      default_price_action: answer_with_facts
      default_unclear_action: continue_current_goal
    rules:
      unclear: clarify_value
    transitions:
      data_complete: presentation
      demo_request: close
      callback_request: close
