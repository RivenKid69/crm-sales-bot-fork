"""
–ú–∞—Ä–∫–µ—Ä—ã —Ç–æ–Ω–∞ –¥–ª—è Tier 1 (regex-based) –∞–Ω–∞–ª–∏–∑–∞.

–°–æ–¥–µ—Ä–∂–∏—Ç:
- TONE_MARKERS: –°–ª–æ–≤–∞—Ä—å –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —Ç–æ–Ω–∞
- INFORMAL_MARKERS: –ú–∞—Ä–∫–µ—Ä—ã –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∏–ª—è
- FRUSTRATION_WEIGHTS: –í–µ—Å–∞ –¥–ª—è –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–æ–≥–æ frustration
- FRUSTRATION_DECAY: –í–µ—Å–∞ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è frustration
- FRUSTRATION_THRESHOLDS: Re-exported from frustration_thresholds (SSoT)
- MAX_FRUSTRATION: Re-exported from frustration_thresholds (SSoT)
"""

from typing import Dict, List

from .models import Tone

# Import from Single Source of Truth for frustration thresholds
# This ensures all components use the same threshold values
from src.frustration_thresholds import (
    FRUSTRATION_THRESHOLDS,
    FRUSTRATION_MAX as MAX_FRUSTRATION,
)


# –ú–∞—Ä–∫–µ—Ä—ã —Ç–æ–Ω–∞ (–ø–∞—Ç—Ç–µ—Ä–Ω—ã regex)
TONE_MARKERS: Dict[Tone, List[str]] = {
    Tone.POSITIVE: [
        r"–æ—Ç–ª–∏—á–Ω–æ", r"—Å—É–ø–µ—Ä", r"–∫–ª–∞—Å—Å", r"–∑–¥–æ—Ä–æ–≤–æ", r"–∫—Ä—É—Ç–æ",
        r"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ", r"–Ω—Ä–∞–≤–∏—Ç—Å—è", r"—Ö–æ—Ä–æ—à–æ", r"–∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ",
        r"–ø—Ä–µ–∫—Ä–∞—Å–Ω–æ", r"–≤–µ–ª–∏–∫–æ–ª–µ–ø–Ω–æ", r"—á—É–¥–µ—Å–Ω–æ", r"–ø–æ—Ç—Ä—è—Å–∞—é—â–µ",
        r"üëç", r"üòä", r"üî•", r"üí™", r"üòÑ", r"üôÇ", r"‚ù§", r"üëè",
    ],
    Tone.FRUSTRATED: [
        r"—Å–∫–æ–ª—å–∫–æ\s+–º–æ–∂–Ω–æ", r"–æ–ø—è—Ç—å", r"—Å–Ω–æ–≤–∞", r"–¥–æ—Å—Ç–∞–ª",
        r"–Ω–∞–¥–æ–µ–ª", r"—Ö–≤–∞—Ç–∏—Ç", r"–æ—Ç—Å—Ç–∞–Ω—å", r"—É–∂–µ\s+–≥–æ–≤–æ—Ä–∏–ª",
        r"–Ω–µ\s+–ø–æ–Ω–∏–º–∞–µ—Ç–µ", r"–±–µ—Å–∏—Ç", r"—Ä–∞–∑–¥—Ä–∞–∂–∞", r"–∑–∞–¥–æ–ª–±–∞–ª",
        r"–∑–∞–º—É—á–∏–ª", r"—É—Ç–æ–º–∏–ª", r"—É—Å—Ç–∞–ª", r"–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ",
        r"üôÑ", r"üò§", r"üò°", r"üò†", r"ü§¨", r"üí¢",
    ],
    Tone.SKEPTICAL: [
        r"—Å–æ–º–Ω–µ–≤–∞", r"–≤—Ä—è–¥\s*–ª–∏", r"–Ω–µ\s+–≤–µ—Ä—é", r"–Ω–µ\s+—É–≤–µ—Ä–µ–Ω",
        r"–ø—Ä–∞–≤–¥–∞\s*\?", r"—Å–µ—Ä—å—ë–∑–Ω–æ\s*\?", r"—ç—Ç–æ\s+—Ç–æ—á–Ω–æ",
        r"–∞\s+–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤", r"—á–µ–º\s+–¥–æ–∫–∞–∂", r"–Ω–µ\s+—Ñ–∞–∫—Ç",
        r"—Å–∫–∞–∑–∫–∏", r"–≤—Ä–∞–Ω—å—ë", r"–æ–±–º–∞–Ω", r"—Ä–∞–∑–≤–æ–¥",
        r"ü§î", r"ü§®", r"üòí",
    ],
    Tone.RUSHED: [
        r"–±—ã—Å—Ç—Ä", r"–∫–æ—Ä–æ—á–µ", r"–¥–∞–≤–∞–π\s+–∫\s+–¥–µ–ª—É", r"–Ω–µ–∫–æ–≥–¥–∞",
        r"–≤—Ä–µ–º–µ–Ω–∏\s+–Ω–µ—Ç", r"—Å—Ä–æ—á–Ω–æ", r"—Å–∫–æ—Ä–µ–µ", r"–Ω–µ\s+—Ç—è–Ω–∏",
        r"–ø–æ–±—ã—Å—Ç—Ä", r"–±–µ–∑\s+–≤–æ–¥—ã", r"–±–ª–∏–∂–µ\s+–∫\s+–¥–µ–ª—É",
        r"–∫\s+—Å—É—Ç–∏", r"–ø–æ\s+–±—ã—Å—Ç—Ä–æ–º—É", r"–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω",
        r"‚è∞", r"‚ö°",
    ],
    Tone.CONFUSED: [
        r"–Ω–µ\s+–ø–æ–Ω—è–ª", r"–Ω–µ\s+–ø–æ–Ω—è—Ç–Ω–æ", r"—á—Ç–æ\s+—ç—Ç–æ", r"–∫–∞–∫\s+—ç—Ç–æ",
        r"–Ω–µ\s+–ø–æ–Ω–∏–º–∞—é", r"–æ–±—ä—è—Å–Ω–∏", r"—á—Ç–æ\s+–∏–º–µ–µ—Ç–µ", r"–∏–º–µ–µ—Ç–µ\s+–≤\s+–≤–∏–¥—É", r"\?\?\?",
        r"–∑–∞–ø—É—Ç–∞–ª", r"—Å–ª–æ–∂–Ω–æ", r"–Ω–µ–ø–æ–Ω—è—Ç", r"—Å—Ç—Ä–∞–Ω–Ω–æ",
        r"–≤\s+—Å–º—ã—Å–ª–µ", r"—Ç–æ\s+–µ—Å—Ç—å", r"–∞\s+–∏–º–µ–Ω–Ω–æ",
        r"ü§∑", r"‚ùì", r"‚ÅâÔ∏è",
    ],
    Tone.INTERESTED: [
        r"—Ä–∞—Å—Å–∫–∞–∂–∏—Ç–µ\s+–ø–æ–¥—Ä–æ–±–Ω–µ–µ", r"–∞\s+–∫–∞–∫",
        r"–ø–æ–∫–∞–∂–∏—Ç–µ", r"—Ö–æ—á—É\s+—É–∑–Ω–∞—Ç—å", r"–ª—é–±–æ–ø—ã—Ç–Ω–æ",
        r"—Ä–∞—Å—Å–∫–∞–∂–∏", r"–ø–æ–≤–µ–¥–∞–π—Ç–µ", r"–ø–æ–¥–µ–ª–∏—Ç–µ—Å—å",
        r"—Ö–æ—Ç–µ–ª–æ—Å—å\s+–±—ã", r"–±—ã–ª–æ\s+–±—ã\s+–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ",
        r"üëÄ", r"üßê", r"ü§©",
    ],
}

# –ú–∞—Ä–∫–µ—Ä—ã –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∏–ª—è
INFORMAL_MARKERS: List[str] = [
    r"\b–ø—Ä–∏–≤–µ—Ç\b", r"\b–ø—Ä–∏–≤\b", r"\b–æ–∫\b", r"\b–æ–∫–µ–π\b", r"\b–Ω—É\b", r"\b—Ç–∏–ø–∞\b",
    r"\b–∫–æ—Ä–æ—á–µ\b", r"\b—á—ë\b", r"\b–≤–∞—â–µ\b", r"\b–Ω–æ—Ä–º\b", r"\b–±–ª–∏–Ω\b",
    r"\b—á–æ\b", r"\b–∞–≥–∞\b", r"\b—É–≥—É\b", r"\b–∫–ª–∞—Å—Å\b", r"\b–∫—Ä—É—Ç–æ\b",
    r"\b—á–µ–ª\b", r"\b–ø–∞—Ü–∞–Ω\b", r"\b–±—Ä–æ\b", r"\b–¥—Ä—É–≥\b", r"\b–±—Ä–∞—Ç–∞–Ω\b",
    r"\b–ª–∞–¥—ã\b", r"\b–ª–∞–¥—É—à–∫–∏\b", r"\b–æ–∫–µ–π–Ω–æ\b", r"\b–Ω–æ—Ä–º–∞—Å\b",
    r"\b–ø–æ–Ω\b", r"\b–ø–æ–Ω—è–ª\b", r"\b—è—Å–Ω\b", r"\b–ø—Ä–∏–∫–æ–ª\b",
]

# –í–µ—Å–∞ –¥–ª—è –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è frustration
FRUSTRATION_WEIGHTS: Dict[Tone, int] = {
    Tone.FRUSTRATED: 3,     # –°–∏–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç
    Tone.SKEPTICAL: 1,      # –ù–µ–º–Ω–æ–≥–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç
    Tone.RUSHED: 1,         # –ù–µ–º–Ω–æ–≥–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç
    Tone.CONFUSED: 1,       # –ï—Å–ª–∏ –¥–æ–ª–≥–æ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç ‚Äî —Ç–æ–∂–µ frustration
}

# –í–µ—Å–∞ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è frustration (decay)
FRUSTRATION_DECAY: Dict[Tone, int] = {
    Tone.NEUTRAL: 1,        # –ù–µ–º–Ω–æ–≥–æ —Å–Ω–∏–∂–∞–µ—Ç
    Tone.POSITIVE: 2,       # –•–æ—Ä–æ—à–æ —Å–Ω–∏–∂–∞–µ—Ç
    Tone.INTERESTED: 2,     # –•–æ—Ä–æ—à–æ —Å–Ω–∏–∂–∞–µ—Ç
}

# NOTE: FRUSTRATION_THRESHOLDS and MAX_FRUSTRATION are now imported from
# src.frustration_thresholds (Single Source of Truth) at the top of this file.
# This ensures consistency with conversation_guard.py and conditions.
